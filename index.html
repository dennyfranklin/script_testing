<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Form</title>
    <link rel="stylesheet" href="styles.css" />
    
    <!-- Freshworks Web Form Script -->
</head>
<body>

    <h1>Contact Us</h1>

    <!-- Placeholder where Freshworks form will render -->
<script src='https://dennydavid1-703975880811311817.myfreshworks.com/crm/sales/web_forms/f5ad71eb05e77968de8081408e1fb5a3007883aafdcfe0a521ba445935a01a71/form.js' crossorigin='anonymous' id='fs_f5ad71eb05e77968de8081408e1fb5a3007883aafdcfe0a521ba445935a01a71'></script>

<script>
(function () {
  console.log("Injecting last name validator...");
  function validateLastName(lastNameField, submitButton) {
    lastNameField.addEventListener('input', function () {
      const lastName = lastNameField.value.trim();
      if (lastName.length < 2) {
        lastNameField.setCustomValidity('Last name must be at least 2 characters.');
        submitButton.disabled = true;
        console.log("Invalid last name:", lastName);
      } else {
        lastNameField.setCustomValidity('');
        submitButton.disabled = false;
        console.log("Valid last name:", lastName);
      }
      lastNameField.reportValidity();
    });
  }
  function setupLastNameValidation() {
    const lastNameField = document.querySelector('input[name="contact[last_name]"]');
    if (lastNameField) {
      console.log("Last name field found:", lastNameField);
      const form = lastNameField.closest('form');
      if (form) {
        const submitButton = form.querySelector('button[type="submit"], input[type="submit"]');
        if (submitButton) {
          validateLastName(lastNameField, submitButton);
          if (lastNameField.value.trim().length < 2) {
            submitButton.disabled = true;
          }
          form.addEventListener('submit', function (event) {
            if (!lastNameField.checkValidity()) {
              console.log("Form submission blocked due to invalid last name.");
              event.preventDefault();
            } else {
              console.log("Form submitted successfully.");
            }
          });
        }
      }
    } else {
      console.warn("Last name input not found.");
    }
  }
  // Wait a bit in case elements are still loading
  setTimeout(setupLastNameValidation, 1000);
})();
</script>
    </div>

</body>
</html>

